# HW-5

<h2>استقرار پروژه</h2>

<h3>توضیحات dockerfile</h3>

<p>در ابتدا از رجیستری مشخص‌شده image مورد نظر را که قرار است از آن استفاده کنیم، معرفی می‌کنیم. در ادامه لازم است دایرکتوری‌ای که در آن کار می‌کنیم را مشخص کنیم و همچنین dependency‌های ضروری را نصب کنیم. در ادامه‌ی فایل کدها و اسکریپت‌های ضروری را به داخل دایرکتوری کپی می‌کنیم. سپس مشخص می‌کنیم که باید منتظر رسیدن دستورات از طریق پورت ۸۰۰۰ باشیم و نهایتا تنظیمات پیش‌فرض را به نحوی قرار می‌دهیم که در صورت آغاز کانتینر برنامه اجرا شود.</p>

<h3>توضیحات docker-compose</h3>

<p>در این فایل یک سرویس وب داریم که برنامه‌ی جنگو را اجرا می‌کند. در ابتدا با استفاده از داکر فایل در دایرکتوری فعلی یک image ایجاد می‌کند. سپس به کمک دستور ارائه‌شده migration پایگاه داده انجام می‌شود و سرور جنگو هم اجرا می‌شود. در ادامه دایرکتوری عوض می‌شود تا تغییرات به کانتینر منتقل شوند. سپس پورت ۸۰۰۰ کانتینر به پورت ۸۰۰۰ لوکال‌هاست مپ می‌شود. در ادامه برنامه را ملزم می‌کنیم سرویس db حتما قبل از این سرویس اجرا شود و نهایتا متغیرهای environment را مطابق میل خود تنظیم می‌کنیم.</p>

<p>سرویس دیگر مربوط به پایگاه داده است. در ابتدا از یک image که برای postgreSQL است در این پایگاه داده استفاده می‌کنیم. سپس یک دایرکتوری را به عنوان بک‌آپ برای دیتابیس در نظر می‌گیریم تا مطمئن شویم پس از اتمام اجرای کانتینر داده‌ها از دست نمی‌روند. در ادامه پورت ۵۴۳۲ از کانتینر را به همین پورت از لوکال‌هاست مپ می‌کنیم. نهایتا هم environment variable‌ها را تنظیم می‌کنیم. توجه کنید که در انتها لازم است دایرکتوری بک‌آپ را هم ایجاد نماییم.</p>

<h3>نحوه دریفات متغیرهای environment در settings.py</h3>

<p>تنظیمات مربوط به database در فایل sttings.py در یک دیکشنری با نام DATABASES انجام می‌شود. ابتدا به کمک تابع os.getenv متغیرهای environment فچ می‌شوند. در ادامه این متغیرها در همان محیطی که پروژه‌ی جنگو در حال اجرا شدن است تنظیم می‌شوند. برای هر کدام از متغیرها هم یک مقدار پیش‌فرض تعیین می‌شود تا مشکلی پیش نیاید. مثلا مقدار پیش‌فرض برای متغیر NAME برابر با db تعیین شده است. در نهایت تمامی کارهای انجام شده در این بخش باعث می‌شود که متغیرها و در نتیجه وضعیت اجرا بهتر مدیریت شوند.</p>

<h2>ارسال درخواست به وب‌سرور</h2>

<p>تصویر زیر مربوط به ایجاد کاربر user1 با رمز 1234 است.</p>

![ایجاد کاربر](https://github.com/SE-Lab-1402-03-G11/HW-5/blob/AliRahmizad/Documents/Report/Report%20Photos/2-1.jpg)

<p>تصویر زیر مربوط به ورود کاربر ذکرشده به حساب کاربری‌اش است.</p>

![ورود به حساب کاربری](https://github.com/SE-Lab-1402-03-G11/HW-5/blob/AliRahmizad/Documents/Report/Report%20Photos/2-2-1.jpg)

<p>تصویر زیر مربوط به ایجاد یادداشت با تیتر title1 و بدنه‌ی body1 برای user1 است.</p>

![ایجاد یادداشت اول](https://github.com/SE-Lab-1402-03-G11/HW-5/blob/AliRahmizad/Documents/Report/Report%20Photos/2-2-2.jpg)

<p>تصویر زیر مربوط به ایجاد یادداشت با تیتر title2 و بدنه‌ی body2 برای user1 است.</p>

![ایجاد یادداشت دوم](https://github.com/SE-Lab-1402-03-G11/HW-5/blob/AliRahmizad/Documents/Report/Report%20Photos/2-3.jpg)

<p>تصویر زیر مربوط به دریافت یادداشت‌های ایجاد‌شده توسط user1 است.</p>

![دریافت یادداشت‌های کاربر](https://github.com/SE-Lab-1402-03-G11/HW-5/blob/AliRahmizad/Documents/Report/Report%20Photos/2-4.jpg)

<p>در فایل urls.py دریافت url‌ها به این شکل انجام می‌شود:</p>

- لیست urlpatterns بخش مرکزی سیستم ارسال url جنگو است، که بر اساس الگویی که url‌ها با آن‌ها مچ می‌شوند، آن‌ها را به ویوی مورد نظر می‌فرستد.
- تابع include() به دیگر پیکربندی‌های url ارجاع می‌دهد.

<p>نحوه‌ی ساخته شدن تست‌ها در پست من هم پیچیدگی خاصی ندارد. صرفا لازم است پس از ارسال درخواست در بخش تست اسکریپت‌ها قرار بگیرند تا پست من نتایج اجرای تست‌ها را در همان بخش به ما نشان بدهد.</p>

<h2>تعامل با داکر</h2>

<h3>نمایش دادن image‌ها و container‌ها</h3>

<p>تصویر زیر مربوط به نمایش دادن image‌هاست. از دستور docker image ls استفاده کرده‌ایم. می‌توان دید که hw-5-web و docker.arvancloud.ir/postgres همان image‌های ما هستند:</p>

![نمایش دادن image‌ها](https://github.com/SE-Lab-1402-03-G11/HW-5/blob/AliRahmizad/Documents/Report/Report%20Photos/3-1.jpg)

<p>تصویر زیر مربوط به نمایش دادن کانتینرهاست. دستور اول، یعنی docker ps، برای نمایش دادن کانتینرهای پروژه‌ی ما به کار رفته است و دستور دوم، یعنی docker ps -a، برای نشان دادن تمامی کانتینرهای این هاست:</p>

![نمایش دادن کانتینرها](https://github.com/SE-Lab-1402-03-G11/HW-5/blob/AliRahmizad/Documents/Report/Report%20Photos/3-2.jpg)

<h3>اجرا شدن دستور در کانتینر وب‌سرور</h3>

<p>تصویر زیر هم اجرا شدن یک دستور در کانتینر وب‌سرور را نشان می‌دهد که می‌توانید دستور و خروجی آن را مشاهده کنید:</p>

![اجرا شدن دستور در وب‌سرور](https://github.com/SE-Lab-1402-03-G11/HW-5/blob/AliRahmizad/Documents/Report/Report%20Photos/3-3.jpg)

<h2>پرسش‌ها</h2>

<h3>پرسش اول</h3>

<p>Image یک بسته‌ی نرم‌افزاری آماده برای اجراست که توسط Dockerfile ساخته می‌شود. یک image شامل تمام موارد لازم مانند نرم‌افزارهای مورد نیاز، تنظیمات، و همچنین کدهای برنامه است. با استفاده از آن می‌توان برنامه را در هر سامانه‌ای و به راحتی، بدون نیاز به تنظیمات خاص و پیچیده، اجرا کرد.</p>

<p>Dockerfile یک فایل متنی است که در آن مشخص می‌شود چگونه باید یک Docker image ساخته شود. این فایل شامل دستوراتی است که تعیین می‌کند چه نرم‌افزارهایی باید نصب شوند، کدام فایل‌ها باید به image اضافه شوند، چه تنظیماتی باید انجام شوند، و در نهایت برنامه  چگونه باید اجرا شود. به بیان دیگر Dockerfile مانند یک نقشه عمل می‌کند که به Docker می‌گوید چگونه یک محیط مناسب برای اجرای برنامه ایجاد کند.</p>

<p>container یک نمونه از image است که در حال اجراست. با اجرا کردن یک container برنامه‌ی مورد نظر در یک محیط ایزوله‌شده اجرا می‌شود. این محیط شامل تمام چیزهایی است که در image تعریف کرده‌اید. containerها به شما امکان می‌دهند تا برنامه‌های خود را در محیط‌های مختلف به شکلی قابل اطمینان و بدون وابستگی به محیط سیستم‌عامل میزبان اجرا کنید.</p>

<h3>پرسش دوم</h3>

<p>پلتفرم kubernets به توسعه‌دهندگان اجازه می‌دهد تا کانتینرها را در محیط‌های تولیدی و توسعه‌ای به شکلی خودکار و کارآمد مدیریت کنند. این برنامه کاربردهای متعددی دارد که در ادامه به آن‌ها اشاره می‌کنیم:</p>
